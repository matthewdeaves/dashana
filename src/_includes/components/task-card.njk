<div class="task-card {% if task.isDone %}is-done{% endif %} {% if task.isOverdue %}is-overdue{% endif %}">
  <div class="card-header">
    <span class="task-name">{{ task.name }}</span>
    {% if task.isDone %}
      <span class="completion-label completion-done">Done</span>
    {% else %}
      <span class="completion-label completion-open">Open</span>
    {% endif %}
  </div>

  <div class="card-meta">
    {% if task.assignee and task.assignee != 'Unassigned' %}
      <span class="task-assignee">{{ task.assignee }}</span>
    {% endif %}

    {% if task.dueDate %}
      <span class="task-due {% if task.isOverdue %}overdue{% endif %}">
        {{ task.dueDate }}
      </span>
    {% endif %}

    {% if task.status %}
      <span class="task-status status-{{ task.status | lower | replace(' ', '-') }}">{{ task.status }}</span>
    {% endif %}
  </div>

  {% if task.priority and not task.isDone %}
    <span class="priority-badge priority-{{ task.priority | lower }}">
      {{ task.priority }}
    </span>
  {% endif %}

  {% if task.tags.length > 0 %}
    <div class="card-tags">
      {% for tag in task.tags %}
        <span class="tag-badge">{{ tag }}</span>
      {% endfor %}
    </div>
  {% endif %}

  {% if task.parentTask %}
    <div class="card-parent">â†³ {{ task.parentTask }}</div>
  {% endif %}

  {% if task.notes %}
    <span class="card-notes-icon" title="{{ task.notes }}">ğŸ“</span>
  {% endif %}

  {% if task.customFields and tasks.customFieldNames.length > 0 %}
    <div class="card-custom-fields">
      {% for fieldName in tasks.customFieldNames %}
        {% if task.customFields[fieldName] %}
          <span class="custom-field">
            <span class="custom-field-name">{{ fieldName }}:</span>
            <span class="custom-field-value">{{ task.customFields[fieldName] }}</span>
          </span>
        {% endif %}
      {% endfor %}
    </div>
  {% endif %}
</div>
